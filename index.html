<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Te amo Tatiana 💖</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      font-family: "Poppins", sans-serif;
      overflow: hidden;
      height: 100vh;
    }

    .pantalla {
      display: none;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }

    .center {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    /* Laberinto */
    #laberinto {
      background: #111;
      position: relative;
      overflow: hidden;
    }

    #inicio {
      width: 30px;
      height: 30px;
      background: lime;
      border-radius: 50%;
      position: absolute;
      left: 20px;
      top: 20px;
      transition: 0.1s;
    }

    #meta {
      width: 40px;
      height: 40px;
      background: white;
      position: absolute;
      right: 30px;
      bottom: 30px;
    }

    .pared {
      position: absolute;
      background: #ff69b4;
    }

    .p1 { top: 100px; left: 0; width: 80%; height: 20px; }
    .p2 { top: 250px; left: 20%; width: 80%; height: 20px; }
    .p3 { top: 400px; left: 0; width: 80%; height: 20px; }

    /* Pregunta */
    #pregunta {
      flex-direction: column;
      gap: 20px;
    }

    button {
      background: #ff69b4;
      border: none;
      padding: 15px 30px;
      font-size: 1.2rem;
      border-radius: 15px;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      transform: scale(1.1);
      background: #ff1493;
    }

    /* Final */
    #mensaje-final {
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      animation: aparecer 2s ease forwards;
    }

    @keyframes aparecer {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <!-- Fase 1: Intro -->
  <div id="intro" class="pantalla center" style="display:flex;">
    <h1 id="mensaje">💞 Tatiana, este juego es para ti 💞</h1>
  </div>

  <!-- Fase 2: Laberinto -->
  <div id="laberinto" class="pantalla">
    <div id="inicio"></div>
    <div id="meta"></div>
    <div class="pared p1"></div>
    <div class="pared p2"></div>
    <div class="pared p3"></div>
  </div>

  <!-- Fase 3: Pregunta -->
  <div id="pregunta" class="pantalla center">
    <h2>¿Me amas? 💘</h2>
    <button id="si">SÍ 💞</button>
    <button id="no">NO 💔</button>
  </div>

  <!-- Fase 4: Final -->
  <div id="mensaje-final" class="center">
    <h1>💫 Te amo Tatiana 💫</h1>
    <p>Gracias por estos hermosos 4 meses de risas, cariño y locuras juntos 💕</p>
  </div>

  <script>
    const intro = document.getElementById("intro");
    const laberinto = document.getElementById("laberinto");
    const pregunta = document.getElementById("pregunta");
    const mensajeFinal = document.getElementById("mensaje-final");

    // Fase inicial
    setTimeout(() => {
      intro.style.display = "none";
      iniciarLaberinto();
    }, 2000);

    function iniciarLaberinto() {
      laberinto.style.display = "block";
      const inicio = document.getElementById("inicio");
      const meta = document.getElementById("meta");
      const paredes = document.querySelectorAll(".pared");

      function checkCollision(a, b) {
        const A = a.getBoundingClientRect();
        const B = b.getBoundingClientRect();
        return !(A.right < B.left || A.left > B.right || A.bottom < B.top || A.top > B.bottom);
      }

      function mover(x, y) {
        inicio.style.left = `${x - 15}px`;
        inicio.style.top = `${y - 15}px`;

        for (let p of paredes) {
          if (checkCollision(inicio, p)) {
            alert("¡Oh no! Tocaste una pared 😅. Intenta otra vez.");
            inicio.style.left = "20px";
            inicio.style.top = "20px";
            return;
          }
        }

        if (checkCollision(inicio, meta)) {
          laberinto.style.display = "none";
          iniciarPregunta();
        }
      }

      laberinto.addEventListener("mousemove", (e) => {
        if (e.buttons === 1) mover(e.clientX, e.clientY);
      });

      laberinto.addEventListener("touchmove", (e) => {
        const touch = e.touches[0];
        mover(touch.clientX, touch.clientY);
      }, { passive: false });
    }

    function iniciarPregunta() {
      pregunta.style.display = "flex";
      const si = document.getElementById("si");
      const no = document.getElementById("no");

      si.onclick = () => {
        pregunta.style.display = "none";
        mostrarFinal();
      };

      no.onclick = () => {
        alert("😢 No puede ser... intenta otra vez 💔");
      };
    }

    function mostrarFinal() {
      mensajeFinal.style.display = "flex";
    }
  </script>
</body>
</html>
