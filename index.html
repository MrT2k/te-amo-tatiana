<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Te amo Tatiana üíñ</title>
  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      font-family: "Poppins", sans-serif;
      overflow: hidden;
      height: 100vh;
    }

    .pantalla {
      display: none;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }

    .center {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    h1, h2 {
      color: #ff69b4;
      text-shadow: 0 0 10px #ff69b4;
    }

    /* Fase 1: Intro */
    #intro {
      flex-direction: column;
      animation: aparecer 1s ease forwards;
    }

    #mensaje {
      font-size: 1.8rem;
      max-width: 80%;
      line-height: 1.5;
      opacity: 0;
      animation: fadeIn 3s ease forwards;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: scale(0.9); }
      100% { opacity: 1; transform: scale(1); }
    }

    /* Fase 2: Laberinto */
    #laberinto {
      background: #111;
      position: relative;
      overflow: hidden;
      cursor: crosshair;
    }

    #inicio {
      width: 30px;
      height: 30px;
      background: lime;
      border-radius: 50%;
      position: absolute;
      left: 20px;
      top: 20px;
      transition: 0.05s;
    }

    #meta {
      width: 40px;
      height: 40px;
      background: white;
      position: absolute;
      right: 40px;
      bottom: 40px;
      box-shadow: 0 0 10px white;
    }

    .pared {
      position: absolute;
      background: #ff69b4;
      border-radius: 10px;
    }

    .p1 { top: 100px; left: 0; width: 80%; height: 20px; }
    .p2 { top: 250px; left: 20%; width: 80%; height: 20px; }
    .p3 { top: 400px; left: 0; width: 80%; height: 20px; }

    /* Fase 3: Pregunta */
    #pregunta {
      flex-direction: column;
      gap: 20px;
      text-align: center;
      display: none;
    }

    button {
      background: #ff69b4;
      border: none;
      padding: 15px 30px;
      font-size: 1.2rem;
      border-radius: 15px;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      transform: scale(1.1);
      background: #ff1493;
    }

    /* Fase 4: Final con estrellas */
    #final {
      display: none;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at bottom, #0a0a0a 0%, #000 100%);
      overflow: hidden;
      position: relative;
    }

    canvas#fireworks {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    #mensaje-final {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      opacity: 0;
      animation: aparecer 3s ease forwards;
      animation-delay: 3s;
    }

    #mensaje-final h1 {
      font-size: 2.5rem;
      color: #ffb6c1;
      text-shadow: 0 0 15px #ff69b4;
    }

    #mensaje-final p {
      font-size: 1.2rem;
      color: #fff;
    }

    @keyframes aparecer {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .estrella {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      animation: parpadeo 2s infinite ease-in-out;
    }

    @keyframes parpadeo {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body>
  <!-- Fase 1 -->
  <div id="intro" class="pantalla center" style="display:flex;">
    <h1 id="mensaje">
      Hola amor üíñ<br><br>
      S√© que desde hace un tiempo estabas esperando esto...<br><br>
      As√≠ que... disfr√∫talo mividaüòäÔøΩ
    </h1>
  </div>

  <!-- Fase 2 -->
  <div id="laberinto" class="pantalla">
    <div id="inicio"></div>
    <div id="meta"></div>
    <div class="pared p1"></div>
    <div class="pared p2"></div>
    <div class="pared p3"></div>
  </div>

  <!-- Fase 3 -->
  <div id="pregunta" class="pantalla center">
    <h2>¬øMe amas? üíò</h2>
    <button id="si">S√ç üíû</button>
    <button id="no">NO üíî</button>
  </div>

  <!-- Fase 4: Final -->
  <div id="final" class="pantalla">
    <canvas id="fireworks"></canvas>
    <div id="mensaje-final">
      <h1>üí´ Te amo Tatiana üí´</h1>
      <p>Gracias por estos hermosos 4 meses de risas, cari√±o y locuras juntos üíï</p>
    </div>
  </div>

  <script>
    const intro = document.getElementById("intro");
    const laberinto = document.getElementById("laberinto");
    const pregunta = document.getElementById("pregunta");
    const final = document.getElementById("final");

    // ‚è≥ Espera el mensaje inicial y pasa al laberinto
    setTimeout(() => {
      intro.style.display = "none";
      iniciarLaberinto();
    }, 7000);

    function iniciarLaberinto() {
      laberinto.style.display = "block";
      const inicio = document.getElementById("inicio");
      const meta = document.getElementById("meta");
      const paredes = document.querySelectorAll(".pared");
      let moviendo = false;

      function checkCollision(a, b) {
        const A = a.getBoundingClientRect();
        const B = b.getBoundingClientRect();
        return !(A.right < B.left || A.left > B.right || A.bottom < B.top || A.top > B.bottom);
      }

      function mover(x, y) {
        inicio.style.left = `${x - laberinto.offsetLeft - 15}px`;
        inicio.style.top = `${y - laberinto.offsetTop - 15}px`;

        for (let p of paredes) {
          if (checkCollision(inicio, p)) {
            alert("¬°Oh no! encerio tocaste una pared tatiana? üôÑ");
            inicio.style.left = "20px";
            inicio.style.top = "20px";
            return;
          }
        }

        if (checkCollision(inicio, meta)) {
          laberinto.style.display = "none";
          iniciarPregunta();
        }
      }

      laberinto.addEventListener("mousedown", () => moviendo = true);
      laberinto.addEventListener("mouseup", () => moviendo = false);
      laberinto.addEventListener("mouseleave", () => moviendo = false);
      laberinto.addEventListener("mousemove", (e) => {
        if (moviendo) mover(e.clientX, e.clientY);
      });

      laberinto.addEventListener("touchstart", () => moviendo = true);
      laberinto.addEventListener("touchend", () => moviendo = false);
      laberinto.addEventListener("touchmove", (e) => {
        if (!moviendo) return;
        const touch = e.touches[0];
        mover(touch.clientX, touch.clientY);
      }, { passive: false });
    }

    function iniciarPregunta() {
      pregunta.style.display = "flex";
      const si = document.getElementById("si");
      const no = document.getElementById("no");

      si.onclick = () => {
        pregunta.style.display = "none";
        mostrarFinal();
      };

      no.onclick = () => {
        alert("JODER MACHO, TANTO QUE ME ESFUERZO EN ESTA MRD PA QUE DIGAS QUE NO?? >:V");
      };
    }

    function mostrarFinal() {
      final.style.display = "block";
      generarEstrellas(100);
      iniciarFuegosArtificiales();
    }

    // üåü Cielo estrellado
    function generarEstrellas(num) {
      for (let i = 0; i < num; i++) {
        const estrella = document.createElement("div");
        estrella.classList.add("estrella");
        estrella.style.top = Math.random() * 100 + "%";
        estrella.style.left = Math.random() * 100 + "%";
        estrella.style.animationDelay = Math.random() * 2 + "s";
        final.appendChild(estrella);
      }
    }

    // üéÜ Fuegos artificiales
    function iniciarFuegosArtificiales() {
      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");
      canvas.width = innerWidth;
      canvas.height = innerHeight;

      const fireworks = [];

      class Particle {
        constructor(x, y, color, speed, angle) {
          this.x = x;
          this.y = y;
          this.color = color;
          this.speed = speed;
          this.angle = angle;
          this.alpha = 1;
        }
        update() {
          this.x += Math.cos(this.angle) * this.speed;
          this.y += Math.sin(this.angle) * this.speed;
          this.alpha -= 0.02;
        }
        draw() {
          ctx.globalAlpha = this.alpha;
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
          ctx.fill();
          ctx.globalAlpha = 1;
        }
      }

      function launchFirework() {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height * 0.5;
        const color = `hsl(${Math.random() * 360}, 100%, 70%)`;

        for (let i = 0; i < 50; i++) {
          const angle = (Math.PI * 2 * i) / 50;
          fireworks.push(new Particle(x, y, color, Math.random() * 4 + 1, angle));
        }
      }

      function animate() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        fireworks.forEach((p, i) => {
          p.update();
          p.draw();
          if (p.alpha <= 0) fireworks.splice(i, 1);
        });
        requestAnimationFrame(animate);
      }

      animate();
      setInterval(launchFirework, 1000);
    }
  </script>
</body>
</html>
